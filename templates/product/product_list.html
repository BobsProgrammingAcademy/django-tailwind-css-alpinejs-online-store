{% extends "layouts/base.html" %}
{% load static %}

{% block content %}

<main class="p-5">
  <div class="md:flex md:items-center md:justify-start">
    <h2 class="text-4xl font-bold tracking-tight text-gray-900 pl-5 py-2">
      {% if category %}{{ category.name }}{% else %}Products{% endif %}
    </h2>
  </div>

  <!-- Product List -->
  <div class="grid gap-8 grig-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 p-5">

    <!-- Product Item -->
    {% for product in pages %}
    <div class="border border-1 border-gray-200 rounded-md hover:border-blue-700 transition-colors bg-white">
      <a href="{{ product.get_absolute_url }}" class="block overflow-hidden">
        <img 
          src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}"
          alt="Product"
          class="rounded-lg hover:scale-105 hover:rotate-1 transition-transform"
        />
      </a>
      <div class="p-4">
        <h3 class="text-lg">{{ product.name }}</h3>
        <h5 class="font-bold">${{ product.price }}</h5>
      </div>
      <div class="flex justify-end py-3 px-4">
        <a href="{{ product.get_absolute_url }}" class="btn-primary">Details</a>
      </div>
    </div>
    {% endfor %}
    <!-- End Product Item -->

  </div>
  <!-- End Product List -->

  {% if pages.has_other_pages %}
  <div class="p-5">
    <nav class="flex items-center justify-between border-t border-gray-200 bg-white px-3 py-3 sm:px-6">
      <div class="hidden sm:block">
        <p class="text-sm text-gray-700">
          Showing page <span class="font-bold text-blue-700">{{ pages.number }}</span> of
          <span class="font-bold text-blue-700">{{ pages.paginator.num_pages }}</span>.
        </p>
      </div>
      <div class="flex flex-1 justify-between sm:justify-end">
        {% if pages.has_previous %}
          <a href="?page={{ pages.previous_page_number }}" class="btn-primary">Previous</a>
        {% endif %}
          {% if pages.has_next %}
            <a href="?page={{ pages.next_page_number }}" class="btn-primary ml-2">Next</a>
          {% endif %}
      </div>
    </nav>
  </div>
  {% endif %}
</main>
  
{% endblock content %}